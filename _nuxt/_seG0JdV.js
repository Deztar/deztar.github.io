import{_ as q}from"./C0bnqowU.js";import{e as X,r as M,f as I,g as Y,h as Z,c as r,a,i as k,v as b,u as o,j as ee,b as te,F as p,k as u,l as R,n as _,o as c,t as v,d as B,m as V,p as ae}from"./CrL4dOpj.js";import{u as se}from"./KtNaZX65.js";import{c as O}from"./DIUI2TVf.js";const ne=[0,9,17,25,37,42,46,50],$=[{name:"Fast Adaptation",image:"https://static.wikia.nocookie.net/battlebrothers/images/e/e7/Perk_33.png"},{name:"Crippling Strikes",image:"https://static.wikia.nocookie.net/battlebrothers/images/8/8d/Perk_57.png"},{name:"Colossus",image:"https://static.wikia.nocookie.net/battlebrothers/images/a/a0/Perk_06.png"},{name:"Nine Lives",image:"https://static.wikia.nocookie.net/battlebrothers/images/f/f8/Perk_07.png"},{name:"Bags and Belts",image:"https://static.wikia.nocookie.net/battlebrothers/images/7/7d/Perk_20.png"},{name:"Pathfinder",image:"https://static.wikia.nocookie.net/battlebrothers/images/d/da/Perk_23.png"},{name:"Adrenaline",image:"https://static.wikia.nocookie.net/battlebrothers/images/a/a2/Perk_37.png"},{name:"Recover",image:"https://static.wikia.nocookie.net/battlebrothers/images/0/01/Perk_54.png"},{name:"Student",image:"https://static.wikia.nocookie.net/battlebrothers/images/e/ed/Perk_21.png"},{name:"Executioner",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/9d/Perk_16.png"},{name:"Bullseye",image:"https://static.wikia.nocookie.net/battlebrothers/images/b/bb/Perk_17.png"},{name:"Dodge",image:"https://static.wikia.nocookie.net/battlebrothers/images/6/62/Perk_01.png"},{name:"Fortified Mind",image:"https://static.wikia.nocookie.net/battlebrothers/images/c/c9/Perk_08.png"},{name:"Resilient",image:"https://static.wikia.nocookie.net/battlebrothers/images/4/44/Perk_04.png"},{name:"Steel Brow",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/95/Perk_09.png"},{name:"Quick Hands",image:"https://static.wikia.nocookie.net/battlebrothers/images/c/c2/Perk_39.png"},{name:"Gifted",image:"https://static.wikia.nocookie.net/battlebrothers/images/4/44/Perk_56.png"},{name:"Backstabber",image:"https://static.wikia.nocookie.net/battlebrothers/images/f/f3/Perk_59.png"},{name:"Anticipation",image:"https://static.wikia.nocookie.net/battlebrothers/images/1/1b/Perk_10.png"},{name:"Shield Expert",image:"https://static.wikia.nocookie.net/battlebrothers/images/0/0a/Perk_05.png"},{name:"Brawny",image:"https://static.wikia.nocookie.net/battlebrothers/images/7/79/Perk_40.png"},{name:"Relentless",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/92/Perk_26.png"},{name:"Rotation",image:"https://static.wikia.nocookie.net/battlebrothers/images/c/c8/Perk_11.png"},{name:"Rally the Troops",image:"https://static.wikia.nocookie.net/battlebrothers/images/a/a3/Perk_42.png"},{name:"Taunt",image:"https://static.wikia.nocookie.net/battlebrothers/images/d/d7/Perk_38.png"},{name:"Mace Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/98/Perk_43.png"},{name:"Flail Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/c/c1/Perk_47.png"},{name:"Hammer Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/7/73/Perk_53.png"},{name:"Axe Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/f/f8/Perk_44.png"},{name:"Cleaver Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/1/1c/Perk_52.png"},{name:"Sword Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/a/a8/Perk_46.png"},{name:"Dagger Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/0/0b/Perk_51.png"},{name:"Polearm Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/d/d7/Perk_58.png"},{name:"Spear Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/0/00/Perk_45.png"},{name:"Crossbow and Firearms Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/6/6f/Perk_48.png"},{name:"Bow Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/9e/Perk_49.png"},{name:"Throwing Mastery",image:"https://static.wikia.nocookie.net/battlebrothers/images/0/03/Perk_50.png"},{name:"Reach Advantage",image:"https://static.wikia.nocookie.net/battlebrothers/images/b/bb/Perk_19.png"},{name:"Overwhelm",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/99/Perk_62.png"},{name:"Lone Wolf",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/9b/Perk_61.png"},{name:"Underdog",image:"https://static.wikia.nocookie.net/battlebrothers/images/c/c3/Perk_60.png"},{name:"Footwork",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/98/Perk_25.png"},{name:"Berserk",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/9a/Perk_35.png"},{name:"Head Hunter",image:"https://static.wikia.nocookie.net/battlebrothers/images/4/4b/Perk_15.png"},{name:"Nimble",image:"https://static.wikia.nocookie.net/battlebrothers/images/2/27/Perk_29.png"},{name:"Battle Forged",image:"https://static.wikia.nocookie.net/battlebrothers/images/5/50/Perk_03.png"},{name:"Fearsome",image:"https://static.wikia.nocookie.net/battlebrothers/images/5/56/Perk_27.png"},{name:"Duelist",image:"https://static.wikia.nocookie.net/battlebrothers/images/9/94/Perk_41.png"},{name:"Killing Frenzy",image:"https://static.wikia.nocookie.net/battlebrothers/images/1/14/Perk_36.png"},{name:"Indomitable",image:"https://static.wikia.nocookie.net/battlebrothers/images/4/4f/Perk_30.png"}],U={hitpoints:"https://static.wikia.nocookie.net/battlebrothers/images/9/94/Health.png",fatigue:"https://static.wikia.nocookie.net/battlebrothers/images/b/b4/Fatigue.png",resolve:"https://static.wikia.nocookie.net/battlebrothers/images/5/5c/Resolve.png",initiative:"https://static.wikia.nocookie.net/battlebrothers/images/e/ea/Initiative.png",meleeAttack:"https://static.wikia.nocookie.net/battlebrothers/images/c/c1/Melee_skill.png",rangedAttack:"https://static.wikia.nocookie.net/battlebrothers/images/0/05/Ranged_skill.png",meleeDefense:"https://static.wikia.nocookie.net/battlebrothers/images/b/b7/Melee_defense.png",rangedDefense:"https://static.wikia.nocookie.net/battlebrothers/images/5/5c/Ranged_defense.png"},oe={name:"",level:1,attr:{},talents:{}},ie={name:"",link:"",attr:{},needed:1},E={hitpoints:2,fatigue:2,resolve:2,initiative:3,meleeAttack:1,rangedAttack:2,meleeDefense:1,rangedDefense:2},le={class:"fr jc ac"},re={class:"fr jc"},ce={class:"fc"},pe=["onClick"],me=["value","onInput"],ge=["value","onInput"],de={class:"nowrap",style:{"margin-left":"5px"}},ke=["onUpdate:modelValue"],he=["src"],be=["onUpdate:modelValue"],ue=["onUpdate:modelValue"],_e=["onClick"],ve=["href"],we=["src"],fe={class:"fr ac"},Pe={class:"fr jc",style:{gap:"10px","flex-wrap":"wrap"}},ye={class:"fr ac"},Ce=["value","onInput"],Ne=["onUpdate:modelValue"],Me=["onClick"],Be=["src"],Ve=["onUpdate:modelValue"],Te=["onClick"],Ue={class:"target dim"},Ae={class:"fr ac"},Le=["onUpdate:modelValue"],De={class:"total dim"},Se={key:0,class:"neg"},Fe={class:"fr ac"},je=["onUpdate:modelValue"],Ie=["value"],Re=["onClick"],Oe={class:"perks fr0 jc"},$e=["src"],Ee={class:"fr ac jc bs",style:{width:"219px",height:"416px","box-sizing":"border-box"},title:"Add brother"},Ge=X({__name:"brothers-planner",setup(He){se({title:"Battle Brothers Planner",meta:[{name:"description",content:"Battle Brothers Planner"}]});const A=Object.keys(U);let P;const L=n=>{var t;const s=[],l=(t=n==null?void 0:n.split("?")[1])==null?void 0:t.split("&");if(l)for(const i of l){const[e,d]=i.split("-");s.push(ne[+e-1]+(+d-1))}return s},m=M([]),g=M([]),h=M(3),D={highlightTips:!1},f=M(D),y=I(()=>m.value.map(n=>{const s={data:n,recruited:0,perks:[]};return s.recruited=g.value.filter(l=>l.className===n.name).length,s.perks=L(n.link),s})),w=I(()=>g.value.map(n=>{const s={data:n,activePerks:[],lvlupsNeeded:{},totalLvlups:0,overflow:0};if(n.className){const l=m.value.find(t=>t.name===n.className);if(l){s.classObject=l,s.activePerks=L(l.link);let t=0,i=0,e;for(e in E){if(!l.attr[e])continue;const d=n.attr[e]||0,j=l.attr[e]||0;if(d>=j)continue;const N=Math.ceil((j-d)/((E[e]||0)+1+.5*(n.talents[e]||0)));s.lvlupsNeeded[e]=N;const T=11-n.level;N>T?(t+=T,i+=N-T):t+=N}s.totalLvlups=t,s.overflow=i}}return s})),H=()=>{m.value.push(O(ie))},S=n=>{m.value.splice(n,1)},x=(n,s)=>{clearTimeout(P),P=window.setTimeout(()=>{const l=m.value[n];S(n),m.value.splice(s,0,l)},500)},z=(n,s)=>{for(const l of g.value)l.className===n.name&&(l.className=s);n.name=s},J=n=>{navigator.clipboard.readText().then(s=>{n.link=s})},K=()=>{g.value.push(O(oe))},F=n=>{g.value.splice(n,1)},G=(n,s)=>{clearTimeout(P),P=window.setTimeout(()=>{const l=g.value[n];F(n),g.value.splice(s,0,l)},500)},Q=(n,s)=>{n.talents[s]=((n.talents[s]||0)+1)%4},W=()=>{const n=JSON.parse(localStorage.getItem("brothers-data")||"{}");g.value=n.data||[],m.value=n.classes||[],h.value=n.attrPerLvl||3,f.value=n.settings||D},C=()=>{localStorage.setItem("brothers-data",JSON.stringify({data:g.value,classes:m.value,attrPerLvl:h.value}))};return Y(()=>{W(),window.addEventListener("beforeunload",C)}),Z(()=>{window.removeEventListener("beforeunload",C),C()}),(n,s)=>{const l=q;return c(),r("div",{id:"brothers-planner",class:_(["fc1",{"highlight-tips":o(f).highlightTips}]),style:{margin:"1ch"}},[a("div",le,[a("button",{onClick:C},"Save"),s[2]||(s[2]=a("label",null,"Attributes on level up: ",-1)),k(a("input",{class:"number-short",type:"number","onUpdate:modelValue":s[0]||(s[0]=t=>ee(h)?h.value=t:null)},null,512),[[b,o(h)]]),s[3]||(s[3]=a("label",null,"Highlight info",-1)),te(l,{checked:o(f).highlightTips,onClick:s[1]||(s[1]=t=>o(f).highlightTips=!o(f).highlightTips)},null,8,["checked"])]),a("div",re,[a("div",ce,[(c(!0),r(p,null,u(o(y),(t,i)=>(c(),r("div",{class:"brother-class fr ac",key:i},[a("button",{onClick:e=>S(i)},"x",8,pe),a("input",{title:"Position in array",class:"number-short dim",type:"number",value:i,onInput:e=>x(i,+e.target.value)},null,40,me),a("input",{class:"name",type:"text",value:t.data.name,onInput:e=>z(t.data,e.target.value)},null,40,ge),a("div",de,[a("span",{class:_([o(y)[i].recruited>=t.data.needed?"good":"neg"])},v(o(y)[i].recruited),3),s[4]||(s[4]=B(" / "))]),k(a("input",{class:"number-short",type:"number","onUpdate:modelValue":e=>t.data.needed=e},null,8,ke),[[b,t.data.needed]]),(c(!0),r(p,null,u(o(A),e=>(c(),r(p,{key:e},[a("img",{src:o(U)[e],class:"icon"},null,8,he),k(a("input",{class:"number-long",type:"number","onUpdate:modelValue":d=>t.data.attr[e]=d},null,8,be),[[b,t.data.attr[e]]])],64))),128)),k(a("input",{class:"dim",type:"text","onUpdate:modelValue":e=>t.data.link=e},null,8,ue),[[b,t.data.link]]),a("button",{class:"paste",onClick:e=>J(t.data)},"Paste",8,_e),a("a",{href:t.data.link||"https://tumult.cc/bb-calc.html",target:"_blank"},s[5]||(s[5]=[a("button",null,"Open",-1)]),8,ve),(c(!0),r(p,null,u(o(y)[i].perks,e=>(c(),r("img",{key:e,src:o($)[e].image,class:"perk-icon"},null,8,we))),128))]))),128)),a("div",fe,[a("button",{onClick:R(H,["prevent"]),title:"Add class"},"+")])])]),a("div",Pe,[(c(!0),r(p,null,u(o(w),(t,i)=>(c(),r("div",{key:i,class:"brother bs fc"},[a("div",ye,[a("input",{title:"Position in array",class:"number-short dim",type:"number",value:i,onInput:e=>G(i,+e.target.value)},null,40,Ce),k(a("input",{class:"name",type:"text","onUpdate:modelValue":e=>t.data.name=e},null,8,Ne),[[b,t.data.name]]),a("button",{class:"delete",onClick:e=>F(i)},"x",8,Me)]),(c(!0),r(p,null,u(o(A),e=>(c(),r("div",{key:e,class:"fr ac"},[a("img",{src:o(U)[e],class:"icon"},null,8,Be),k(a("input",{class:"number-long",type:"number","onUpdate:modelValue":d=>t.data.attr[e]=d},null,8,Ve),[[b,t.data.attr[e]]]),a("div",{class:"talent",onClick:d=>Q(t.data,e)},[a("span",{class:_({active:t.data.talents[e]&&t.data.talents[e]>=1})},"★",2),a("span",{class:_({active:t.data.talents[e]&&t.data.talents[e]>=2})},"★",2),a("span",{class:_({active:t.data.talents[e]&&t.data.talents[e]>=3})},"★",2)],8,Te),o(w)[i].classObject?(c(),r(p,{key:0},[a("span",Ue,v(o(w)[i].classObject.attr[e]),1),o(w)[i].lvlupsNeeded[e]?(c(),r(p,{key:0},[s[6]||(s[6]=B(" [ ")),a("span",{class:_(["lvlups",{neg:o(w)[i].lvlupsNeeded[e]>11-t.data.level}])},v(o(w)[i].lvlupsNeeded[e]),3),s[7]||(s[7]=B(" ] "))],64)):V("",!0)],64)):V("",!0)]))),128)),a("div",Ae,[s[8]||(s[8]=a("img",{src:"https://static.wikia.nocookie.net/battlebrothers/images/3/3d/Level.png",class:"icon"},null,-1)),k(a("input",{class:"number-short",type:"number","onUpdate:modelValue":e=>t.data.level=e},null,8,Le),[[b,t.data.level]]),a("div",De,[a("span",{class:_(["total-lvlups",[t.totalLvlups>(11-t.data.level)*o(h)?"neg":"good"]])},v(t.totalLvlups),3),t.overflow?(c(),r("span",Se," + "+v(t.overflow),1)):V("",!0),B(" / "+v((11-t.data.level)*o(h)),1)])]),a("div",Fe,[k(a("select",{class:"brother-class","onUpdate:modelValue":e=>t.data.className=e},[(c(!0),r(p,null,u(o(m),e=>(c(),r(p,{key:`${i}-${e.name}`},[e.name?(c(),r("option",{key:0,value:e.name},v(e.name),9,Ie)):V("",!0)],64))),128))],8,je),[[ae,t.data.className]]),a("button",{class:"unclass",onClick:e=>t.data.className=void 0}," x ",8,Re)]),a("div",Oe,[(c(!0),r(p,null,u(t.activePerks,e=>(c(),r("img",{key:e,src:o($)[e].image,class:"perk-icon"},null,8,$e))),128))])]))),128)),a("div",Ee,[a("button",{onClick:R(K,["prevent"])},"+")])])],2)}}});export{Ge as default};
