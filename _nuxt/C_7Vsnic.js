import{e as J,r as b,f as D,g as O,h as q,c as d,a,u,t as x,F as g,k as y,o as c,m as w}from"./CrL4dOpj.js";const j={id:"hex-tile-sandbox",class:"fc1"},A={class:"controls fr1"},F=["value"],V=["value"],K={class:"display fr1"},M={class:"rooms fc"},P=["id"],U=["value","onInput"],X=["onClick"],z={class:"hex-field"},G=["id","onDragstart"],Y=J({__name:"hex-tile-sandbox",setup(Q){const m=b(4),p=b(13),l=b(["Tile1","Tile2","Tile3"]),h=t=>3*t*(t-1)+1,$=t=>{var s,i,f,r,C;const e=+(((i=(s=t.target)==null?void 0:s.id)==null?void 0:i.substring(5))||-1),n=+(((f=t.dataTransfer)==null?void 0:f.getData("text"))||-1);if(e<0||n<0)return;const o=l.value[n];l.value[n]=l.value[e],l.value[e]=o,k(),(r=document.getElementById(`cell-${e}`))==null||r.classList.remove("highlight"),(C=document.getElementById(`cell-${n}`))==null||C.classList.remove("highlight")},k=()=>{let t=l.value.length;for(t;t>=0&&l.value[t]===void 0;t--);l.value.splice(t+1)},S=t=>{l.value[t]=void 0,k()},I=()=>{let t=l.value.findIndex(e=>e===void 0);t===-1&&(t=l.value.length),l.value[t]=""},L=D(()=>{const t=[],e=m.value,n=e-1;for(let o=0,s=2*e-1;o<s;o++)t[o]=[];t[n][n]=0;for(let o=1;o<e;o++){const s=h(o),i=h(o+1),f=2*o-1;for(let r=0;r<=o;r++)t[n-o][e-o-1+r]=s+r,t[n+o][e-o-1+r]=i-o-1+r;for(let r=0;r<f;r++)t[n-o+1+r][n-o]=s+o+r*2+1,t[n-o+1+r][n+o]=s+o+r*2+2}for(let o=0,s=2*e-1;o<s;o++)t[o]=t[o].filter(i=>!isNaN(i));return t}),N=D(()=>h(m.value)),T=()=>{const t=JSON.parse(localStorage.getItem("hex-data")||"{}");l.value=t.rooms.map(e=>e===null?void 0:e)||[],m.value=t.radius},v=()=>{localStorage.setItem("hex-data",JSON.stringify({rooms:l.value,radius:m.value}))},_=()=>{navigator.clipboard.readText().then(t=>{const e=JSON.parse(t||"{}");l.value=e.rooms.map(n=>n===null?void 0:n)||[]})},E=()=>{navigator.clipboard.writeText(JSON.stringify({rooms:l.value}))},B=()=>{document.querySelectorAll(".hex-cell").forEach(t=>{t.classList.add("highlight")})},R=()=>{document.querySelectorAll(".hex-cell").forEach(t=>{t.classList.remove("highlight")})},H=t=>{var n;const e=t.target;if(e)if(t.ctrlKey)e.classList.remove("highlight");else{const o=+e.id.substring(5);(n=document.querySelector(`#room-${o} input`))==null||n.focus()}};return O(()=>{T(),addEventListener("beforeunload",v)}),q(()=>{removeEventListener("beforeunload",v),v()}),(t,e)=>(c(),d("div",j,[a("div",A,[a("button",{onClick:e[0]||(e[0]=n=>v())},"Save"),a("button",{onClick:e[1]||(e[1]=n=>_())},"Paste"),a("button",{onClick:e[2]||(e[2]=n=>E())},"Copy"),a("button",{onClick:e[3]||(e[3]=n=>B())},"Highlight"),a("button",{onClick:e[4]||(e[4]=n=>R())},"HL off"),e[9]||(e[9]=a("label",null,"Radius:",-1)),a("input",{class:"number-short",type:"number",min:"1",max:"5",value:u(m),onInput:e[5]||(e[5]=n=>m.value=+n.target.value)},null,40,F),e[10]||(e[10]=a("label",null,"Room dimension:",-1)),a("input",{class:"number-long",type:"number",min:"1",max:"5",value:u(p),onInput:e[6]||(e[6]=n=>p.value=+n.target.value)},null,40,V),a("label",null,"Dimensions: "+x((u(p)-1)*(u(m)*2-1)+1),1),a("label",null,"- Total: "+x(u(N)),1)]),a("div",K,[a("div",M,[(c(!0),d(g,null,y(u(l),(n,o)=>(c(),d(g,{key:o},[n!==void 0?(c(),d("div",{key:0,class:"room fr",id:`room-${o}`},[a("input",{class:"name",type:"text",value:n,onInput:s=>u(l)[o]=s.target.value},null,40,U),a("button",{class:"delete",onClick:s=>S(o)},"X",8,X)],8,P)):w("",!0)],64))),128)),a("button",{class:"add",onClick:e[7]||(e[7]=n=>I())},"+")]),a("div",z,[(c(!0),d(g,null,y(u(L),(n,o)=>(c(),d("div",{class:"hex-row",key:o},[(c(!0),d(g,null,y(n,s=>(c(),d("div",{key:s,draggable:"true",id:`cell-${s}`,onDragstart:i=>i.dataTransfer.setData("text/plain",`${s}`),onDragover:e[8]||(e[8]=i=>i.preventDefault()),onDrop:$,onClick:H,class:"hex-cell bs"},x(u(l)[s]||""),41,G))),128))]))),128))])])]))}});export{Y as default};
